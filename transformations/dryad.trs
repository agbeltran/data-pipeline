/* Dataset Information */
transform column "$.'record'.'header'.'identifier'.'_$'" to "dataset.ID";
transform column "$.'record'.'metadata'.'oai_dc:dc'.'dc:title'.'_$'" to "dataset.title";
transform column "$.'record'.'metadata'.'oai_dc:dc'.'dc:type'.'_$'" to "dataset.type";
transform column "$.'record'.'metadata'.'oai_dc:dc'.'dc:creator'.'_$'" to "dataset.creator";
transform column "$.'record'.'metadata'.'oai_dc:dc'.'dc:description'.'_$'" to "dataset.description";
transform column "$.'record'.'metadata'.'oai_dc:dc'.'dc:subject'[*].'_$'" to "dataset.keywords[]";

/* Dataset Distribution */
transform column "$.'record'.'header'.'datestamp'.'_$'" to "dataset.dateLastUpdate" apply toStandardDate("yyyy-MM-dd'T'HH:mm:ssZ");
transform column "$.'record'.'metadata'.'oai_dc:dc'.'dc:date'[0].'_$'" to "dataset.dateAccession" apply toStandardDateTime("yyyy-MM-dd'T'HH:mm:ssZ");
transform column "$.'record'.'metadata'.'oai_dc:dc'.'dc:date'[1].'_$'" to "dataset.dateAvailable" apply toStandardDateTime("yyyy-MM-dd'T'HH:mm:ssZ");
transform column "$.'record'.'metadata'.'oai_dc:dc'.'dc:date'[2].'_$'" to "dataset.dateIssued" apply toStandardDate("yyyy-MM-dd'T'HH:mm:ssZ");

/* Datastandards Information */
transform column "$.'record'.'header'.'fetchURL'.'_$'" to "datastandard.name" apply {{ result = 'Dublin Core' }};
transform column "$.'record'.'header'.'fetchURL'.'_$'" to "datastandard.homepage" apply {{ result = 'dublincore.org' }};
transform column "$.'record'.'header'.'fetchURL'.'_$'" to "datastandard.license" apply {{ result = 'http://dublincore.org/about/copyright/' }};

/* Data Repository Information */
transform column "$.'record'.'header'.'repository'.'_$'" to "dataRepository.name";
transform column "$.'record'.'header'.'fetchURL'.'_$'" to "dataRepository.ID" apply {{ result = 'SCR:005910' }};
transform column "$.'record'.'header'.'fetchURL'.'_$'" to "dataRepository.homepage" apply {{ result = 'http://www.datadryad.org' }};

/* Identifiers Information */
transform columns "$.'record'.'metadata'.'oai_dc:dc'.'dc:identifier'[*].'_$'" to "identifiers.ID[]";

/* Access Information */
transform column "$.'record'.'header'.'fetchURL'.'_$'" to "access.accessURL";
let "access.accesstypes" = "download";
let "access.authorization" = "none";
let "access.authentication" = "none";

/* License Information */
transform column "$.'record'.'metadata'.'oai_dc:dc'.'dc:rights'.'_$'" to "license.name";

/* Organization Information */
transform column "$.'record'.'header'.'fetchURL'.'_$'" to "organization.name" apply {{ result = 'Dryad Digital Repository' }};
transform column "$.'record'.'header'.'fetchURL'.'_$'" to "organization.abbreviation" apply {{ result = 'Dryad' }};
transform column "$.'record'.'header'.'fetchURL'.'_$'" to "organization.ID" apply {{ result = 'SCR:005910' }};


/* items not included in the model */
transform column "$.'record'.'header'.'setSpec'.'_$'" to "internal.setID";
transform column "$.'record'.'header'.'setName'.'_$'" to "internal.setName";
transform column "$.'record'.'header'.'recNum'.'_$'" to "internal.recNum";
transform column "$.'record'.'metadata'.'oai_dc:dc'.'dc:relation'.'_$'" to "dataset.relatedDataset" apply {{ result = 'hdl:' + value[22:]}};
